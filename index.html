<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mining Order Board — Mining Economy Simulator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">MB</div>
      <div>
        <h1>Mining Order Board</h1>
        <p class="lead">Market-driven contracts, companies, investments & leaderboards.</p>
        <div class="sublead">Auto orders every 10s • Autosave • Export/Import backup</div>
      </div>

      <div style="margin-left:auto;display:flex;gap:10px;align-items:center">
        <div class="balance panel">
          <div style="font-size:12px;color:var(--muted)">Balance</div>
          <div style="min-width:120px;text-align:right"><b id="balance">$0</b><div class="small muted" id="networth">Est net worth</div></div>
        </div>

        <div class="panel stat" style="padding:8px 12px">
          <div style="font-size:12px;color:var(--muted)">Level</div>
          <div style="font-weight:800" id="levelDisplay">1</div>
          <div class="small-muted" id="xpDisplay">XP: 0/100</div>
        </div>
      </div>
    </header>

    <main>
      <!-- Left: Market + Investments -->
      <aside class="panel leftcol">
        <h3 style="margin:0 0 8px 0">Market</h3>
        <div class="small muted">Resources — click an ore to invest, view sparkline and price.</div>

        <div class="market-controls" style="margin-top:10px;display:flex;gap:8px">
          <button class="btn" id="tickBtn">Advance market</button>
          <button class="ghost" id="resetBtn">Reset</button>
          <label style="display:flex;align-items:center;gap:6px;margin-left:auto"><input type="checkbox" id="autoTick" checked /> <span class="small-muted">Auto-tick</span></label>
        </div>

        <div id="stocksList" class="stocks" style="margin-top:12px"></div>

        <h4 style="margin-top:12px">Investments</h4>
        <div id="investList" class="panel" style="padding:8px;border-radius:10px;max-height:180px;overflow:auto"></div>

        <div style="margin-top:12px;display:flex;gap:8px">
          <button class="ghost" id="exportBtn">Export Data</button>
          <label class="ghost" for="importInput" style="cursor:pointer;padding:8px;border-radius:8px">Import Data</label>
          <input id="importInput" type="file" accept="application/json" style="display:none" />
        </div>
      </aside>

      <!-- Right: Orders, Companies, Leaderboard -->
      <section class="panel rightcol">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <h3 style="margin:0">Orders</h3>
            <div class="small-muted">Generate, accept, complete. Auto orders every 10s.</div>
          </div>
          <div style="display:flex;gap:8px;align-items:center">
            <div class="small-muted">Tier</div>
            <div id="tierButtons" style="display:flex;gap:6px"></div>
            <select id="modeSelect" class="ghost" style="padding:8px;border-radius:8px;background:transparent;color:var(--muted)">
              <option value="solo">Solo</option>
              <option value="company">Company</option>
            </select>
            <button class="btn" id="genBtn">Generate order</button>
          </div>
        </div>

        <div id="ordersList" class="orders" style="margin-top:12px"></div>

        <hr style="margin:14px 0;border-color:rgba(255,255,255,0.04)" />

        <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:flex-start">
          <div style="flex:1;min-width:260px">
            <h4>Company</h4>
            <div id="companyPanel" class="panel" style="padding:10px;border-radius:8px">
              <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
                <input id="companyName" placeholder="Company name" class="ghost" style="padding:8px;border-radius:8px;background:transparent;color:var(--muted);flex:1" />
                <button class="btn" id="createCompanyBtn">Create</button>
              </div>
              <div id="companyInfo" class="small-muted">No company joined.</div>
              <div style="margin-top:8px;display:flex;gap:8px">
                <button class="ghost" id="leaveCompanyBtn">Leave</button>
                <button class="ghost" id="companyInvestBtn">Invest as Company</button>
              </div>
            </div>
          </div>

          <div style="flex:1;min-width:260px">
            <h4>Companies (Join / Transfer)</h4>
            <div id="companyList" class="panel" style="padding:10px;border-radius:8px;max-height:160px;overflow:auto"></div>
          </div>

          <div style="flex:1;min-width:260px">
            <h4>Leaderboard (local / placeholder)</h4>
            <div id="leaderboard" class="panel" style="padding:10px;border-radius:8px;max-height:160px;overflow:auto"></div>
          </div>
        </div>

      </section>
    </main>

    <footer style="margin-top:18px" class="small-muted">Tip: Bulk company orders (up to 20,480 ores) update payout when completed — accept at your own risk.</footer>
  </div>

  <!-- Ores & server data files (ores.js, data.js) are loaded by script.js if present -->
  <script src="ores.js"></script>
  <script src="data.js"></script>
  <script src="webhooks.js"></script>
  <script src="script.js"></script>
</body>
</html>
